<html>
<script language="JavaScript" type="text/JavaScript">
<!--
var obeImages = new Array;
var eyeglass = new Image;
 
function preLoadImages()
{
  eyeglass.src = "images/view_image.gif";
  images = document.images;
  // Only load images with class="imgborder_off"
  for (i = 0; i < images.length; i++)
  {
    image = images[i];
    if (image.className.substr(0, 10) == "imgborder_")
    {
        img = new Image;
        img.id = image.id;
        img.name = image.name;
        img.src = "images/" + image.name + ".gif";
        obeImages[img.name] = img;
    }
  }
}
 
function showImage(obj)
{
  if (obj.className.substr(0, 10) == "imgborder_")
  {
    newImg = obeImages[obj.name];
    obj.src = newImg.src;
    if (obj.border > 0)
    {
      obj.className = "imgborder_on";
    }
  }
}
 
function hideImage(obj)
{
  if (obj.className.substr(0, 10) == "imgborder_")
  {
    obj.src = eyeglass.src;
    obj.className = "imgborder_off";
  }
}
 
function showAllImages()
{
  imgs = document.images;
  for (i=0; i < imgs.length; i++)
  {
    showImage(imgs[i]);
  }
}
 
function hideAllImages()
{
  imgs = document.images;
  for (i=0; i < imgs.length; i++)
  {
    hideImage(imgs[i]);
  }
}
//-->
</script>
<style type="text/css">
<!--
.style1 {font-weight: bold}
-->
</style>
<title>Manipulating partitions in Oracle Database 11g</title>
<link href="../../library/otn_new.css" rel="stylesheet" type="text/css">
<link href="../library/otn_new.css" rel="stylesheet" type="text/css">


<!--
.style2 {font-family: "Courier New", Courier, mono}
.style4 {font-family: "Courier New", Courier, mono; font-weight: bold; }
.style6 {font-size: 12px; line-height: 14px; color: #000000; text-decoration: none; visited: #000000; font-family: Arial, Helvetica, sans-serif;}
-->
</style>
<body bgcolor="#ffffff" text="#000000">
<h3 class="topstoryhead">Manipulating Partitions in Oracle Database 11<i>g</i></h3>
<h4 class="navheader">Purpose</h4>
<p class="bodycopy">This tutorial demonstrates how to use various partitioning 
  techniques in Oracle Database 11<i>g</i>. </p>
<p class="navheader">Time to Complete</p>
<p class="bodycopy">Approximately 50 minutes </p>
<h3 class="Overview"><a name="t"></a><span class="navheader">Topics</span></h3>
<p class="bodycopy">This tutorial covers the following topics:</p>
<table border="0" cellspacing="0" cellpadding="1">
  <tbody> 
    <tr valign="top">
      <td><img src="images/bullet.gif" alt="bullet" width="16" height="16"></td>
      <td class="bodylink"><a href="#o">Overview</a></td>
    </tr>
    <tr valign="top">
      <td><img src="images/bullet.gif" alt="bullet" width="16" height="16"></td>
      <td class="bodylink"><a href="#p">Prerequisites</a></td>
    </tr>
    <tr valign="top">
      <td><img src="images/bullet.gif" alt="bullet" width="16" height="16"></td>
      <td class="bodylink"> <a href="#t1" class="boldbodylink" >Using Reference Partitioning </a> </td>
    </tr>
    <tr valign="top">
      <td><img src="images/bullet.gif" alt="bullet" width="16" height="16"></td>
      <td class="bodylink"> <a href="#t2" class="boldbodylink" >Using Interval Partitioning </a></td>
    </tr>
    <tr valign="top">
      <td><img src="images/bullet.gif" alt="bullet" width="16" height="16"></td>
      <td class="bodylink"><a href="#t3" class="boldbodylink" >Using Extended Composite Partitioning </a> </td>
    </tr>
    <tr valign="top">
      <td><img src="images/bullet.gif" alt="bullet" width="16" height="16"></td>
      <td class="bodylink"><a href="#t4" class="boldbodylink" >Using Virtual Column-Based Partitioning </a> </td>
    </tr>
    <tr valign="top">
      <td><img src="images/bullet.gif" alt="bullet" width="16" height="16"></td>
      <td class="bodylink"><a href="#s">Summary</a></td>
    </tr>
  </tbody> 
</table>
<h4 class="navheader">Viewing Screenshots</h4>
<p class="bodycopy"><img src="images/view_image.gif" width="24" height="24" align="absmiddle" onMouseOver="showAllImages()"> 
  <b><span class="style1"><font color="#ff0000" face="Arial, Helvetica, sans-serif">Place the cursor over this icon to</font><font color="#ff0000"> load and view all the screenshots for this tutorial. 



<strong> (Caution: This action loads all screenshots simultaneously, so response time may be slow depending on your Internet connection.)</strong> </font><font color="#ff0000"></font></span></b></p>
<p class="bodycopy"><b>Note: </b>Alternatively, you can place the cursor 
  over an individual icon in the following steps to load and view only the screenshot 
  associated with that step. You can hide an individual  screenshot by clicking it. </p>
<h3 class="Overview"><a name="o"></a><span class="navheader">Overview</span></h3>
<p><font face="Arial" size="2">In Oracle Database 11<i>g</i>, there are a number 
  of new techniques for partitioning your table data to increase the retrieval 
  performance and organization of your data. These techniques include: </font> 
</p>
<table width="650" border="1" cellpadding="1" cellspacing="0">
  <tbody>
    <tr valign="top">
      <td width="97" class="bodycopy"><strong>Reference</strong></td>
      
    <td width="543" class="bodylink"><span class="bodycopy">Allows tables with 
      a parent-child relationship to be logically equi-partitioned by inheriting 
      the partition key from the parent table without duplicating the key columns</span></td>
    </tr>
    <tr valign="top">
      <td class="bodycopy"><strong>Interval</strong></td>
      
    <td class="bodylink"><span class="bodycopy">Automates the creation of range 
      partitions</span></td>
    </tr>
    <tr valign="top">
      <td class="bodycopy"><strong>Extended Composite </strong></td>
      <td class="bodylink"><span class="bodycopy">Enables logical range partitioning along two dimensions</span></td>
    </tr>
    <tr valign="top">
      <td class="bodycopy"><strong>Virtual Column </strong></td>
      
    <td class="bodylink"><span class="bodycopy">Allows partition key columns to 
      be defined on virtual columns of a table</span></td>
    </tr>
  </tbody>
</table>
<p align="right"><a href="#t" class="bodylink">Back to Topic List</a></p>
<h3 class=navheader><a name="p"></a>Prerequisites</h3>
<p class="bodycopy">Before you perform this tutorial, you should: </p>
<table border="0" cellpadding="1" cellspacing="0" width="650">
  <tbody>
    <tr valign="top">
      <td class="bodycopy" width="25"><b> 1.</b></td>
      <td colspan="2">
      <p class="bodycopy">Install Oracle Database 11<i>g</i>. </p>
    </td>
    </tr>
    <tr valign="top">
      <td class="bodycopy"><b> 2.</b></td>
      <td colspan="2">
      <p class="bodycopy">Download and unzip the <a href="files/partition.zip"><font face="Courier New, Courier, mono">partition.zip</font></a> 
        file into your working directory.</p>
    </td>
    </tr>
    <tr valign="top">
      <td class="bodycopy"><b> 3.</b></td>
      <td colspan="2"><p class="bodycopy">Open a terminal window and execute the following commands:</p>
        
      <pre class="style2 bodycopy"><strong><font face="Courier New, Courier, mono">sqlplus / as sysdba
@setup</font></strong></pre>
        <p class="bodycopy"><span class="bodycopy style2"><img src="images/view_image.gif" name="setup" border="1" class="imgborder_off" id="setup" onClick="hideImage(this)" onMouseOver="showImage(this)"></span></p>
        <p class="bodycopy"><br>
        </p></td>
    </tr>
  </tbody>
</table>
<P align="right" class=bodycopy><a href="#t" class="bodylink">Back to Topic List</a></P>
<h3 class="Install"><a name="t1" id="t1"></a><SPAN class=navheader>Using Reference Partitioning</SPAN></h3>
<p><span class="bodycopy">Reference partitioning enables tables with a parent-child relationship to be logically equi-partitioned by inheriting the partition key from the parent table without duplicating the key columns. The partitioning key is resolved through an existing parent-child relationship, enforced by active primary key or foreign key constraints. The logical dependency  also automatically cascades partition maintenance operations, thus making application development easier and less error-prone.</span></p>
<p><span class="bodycopy">Perform 
          the following steps to further understand the use of reference partitioning:</span></p>
<table border="0" cellspacing="0" cellpadding="1" width="650">
  <tr valign="top"> 
    <td width="25" class="bodycopy"><b> 1.</b></td>
    <td width="621"> 
      <p class="bodycopy">Open a terminal window and log in to SQL*Plus as the 
        <span class="style2"><strong><font face="Courier New, Courier, mono">SH</font></strong></span> 
        user. Execute the <span class="style4"><a href="files/create_orders.sql"><font face="Courier New, Courier, mono">create_orders.sql</font></a></span><font face="Courier New, Courier, mono"> 
        </font>script to create the range-parititioned <span class="style2"><font face="Courier New, Courier, mono">ORDERS</font></span> 
        table. </p>
      <p class="bodycopy style2"><b><font face="Courier New, Courier, mono" size="2">@create_orders</font></b></p>
      <p class="bodycopy style2"><img src="images/view_image.gif" name="create_orders" border="1" class="imgborder_off" id="create_orders" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
      <p>&nbsp;</p>
    </td>
  </tr>
  <tr valign="top"> 
    <td width="25" class="bodycopy"><b> 2.</b></td>
    <td width="621"> 
      <p class="bodycopy">Execute the<font face="Courier New, Courier, mono"> 
        <span class="style2"><strong><a href="files/create_order_items.sql">create_order_items.sql</a></strong></span> 
        </font>script to create a reference-partitioned <span class="style2"><font face="Courier New, Courier, mono">ORDER_ITEMS</font></span><font face="Courier New, Courier, mono"> 
        </font>table. </p>
      <p class="bodycopy"><span class="bodycopy style2"><b><font face="Courier New, Courier, mono">@create_order_items</font></b></span></p>
      <p><img src="images/view_image.gif" name="create_order_items" border="1" class="imgborder_off" id="create_order_items" onClick="hideImage(this)" onMouseOver="showImage(this)"> </p> 
		
      <p>&nbsp;</p>
    </td>
  </tr>
  <tr valign="top"> 
    <td width="25" class="bodycopy"><b> 3.</b></td>
    <td width="621"> 
      <p class="bodycopy">Execute the<font face="Courier New, Courier, mono"> 
        <a href="files/query_dict_1.sql"><span class="style2"><strong>query_dict_1.sql</strong></span></a></font> 
        script to view information about the reference-partitioned <span class="style2"><font face="Courier New, Courier, mono">ORDER_ITEMS</font></span><font face="Courier New, Courier, mono"> 
        </font>table. </p>
      <p><span class="bodycopy style2"><b><font face="Courier New, Courier, mono" size="2">@query_dict_1</font></b></span></p>
      <p><img src="images/view_image.gif" name="query_dict_1" border="1" class="imgborder_off" id="query_dict_1" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
      <p>&nbsp;</p></td>
  </tr>
  <tr valign="top">
    <td class="bodycopy"><b> 4.</b></td>
    <td>
      <p class="bodycopy">Execute the<font face="Courier New, Courier, mono"> 
        <span class="style2"><strong><a href="files/insert_orders.sql">insert_orders.sql</a></strong></span> 
        </font>script to insert data into the <span class="style2"><font face="Courier New, Courier, mono">ORDERS</font></span> 
        table. </p>
      <p class="bodycopy"><span class="bodycopy style2"><b><font face="Courier New, Courier, mono">@insert_orders</font></b></span></p>
      <p><img src="images/view_image.gif" name="insert_orders" border="1" class="imgborder_off" id="insert_orders" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
        <p>&nbsp;</p></td>
  </tr>
  <tr valign="top">
    <td class="bodycopy"><b> 5.</b></td>
    <td>
      <p class="bodycopy">Execute the<font face="Courier New, Courier, mono"> 
        <span class="style2"><strong><a href="files/show_data_placement.sql">show_data_placement.sql</a></strong></span> 
        </font>script to observe how the data is colocated in the partitions. 
      </p>
      <p class="bodycopy"><span class="bodycopy style2"><b><font face="Courier New, Courier, mono">@show_data_placement</font></b></span></p>
      <p><img src="images/view_image.gif" name="show_data_placement" border="1" class="imgborder_off" id="show_data_placement" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
        <p><img src="images/view_image.gif" name="show_data_placement_2" border="1" class="imgborder_off" id="show_data_placement_2" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
        <p><img src="images/view_image.gif" name="show_data_placement_3" border="1" class="imgborder_off" id="show_data_placement_3" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
        <p>&nbsp;</p></td>
  </tr>
  <tr valign="top">
    <td class="bodycopy"><b> 6.</b></td>
    <td> 
      <p class="bodycopy">To show the partitionwise join, set <span class="style2">the<font face="Courier New, Courier, mono"> 
        _parallel_broadcast_enabled</font></span> parameter to <font face="Courier New, Courier, mono">FALSE</font>. 
        Execute the following command:</p>
      <p class="style2 bodycopy"><strong> <font face="Courier New, Courier, mono" size="2">ALTER 
        SESSION SET "_parallel_broadcast_enabled"=FALSE; </font></strong></p>
      <p><img src="images/view_image.gif" name="pwj" border="1" class="imgborder_off" id="pwj" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
        <p>&nbsp;</p></td>
  </tr>
  <tr valign="top">
    <td class="bodycopy"><b> 7.</b></td>
    <td>
      <p class="bodycopy">Execute the <span class="style2"><strong><a href="files/show_plan.sql"><font face="Courier New, Courier, mono">show_plan.sql</font></a></strong></span><font face="Courier New, Courier, mono"> 
        </font>script to view information about the partitionwise join. </p>
      <p class="bodycopy"><span class="bodycopy style2"><b><font face="Courier New, Courier, mono">@show_plan</font></b></span></p>
      <p><img src="images/view_image.gif" name="show_plan" border="1" class="imgborder_off" id="show_plan" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
        <p><img src="images/view_image.gif" name="show_plan_02" border="1" class="imgborder_off" id="show_plan_02" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
        <p><img src="images/view_image.gif" name="show_plan_03" border="1" class="imgborder_off" id="show_plan_03" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
        <p>&nbsp;</p></td>
  </tr>
  <tr valign="top">
    <td class="bodycopy"><b> 8.</b></td>
    <td>
      <p class="bodycopy">Execute the<font face="Courier New, Courier, mono"> 
        <span class="style2"><strong><a href="files/drop_partition.sql">drop_partition.sql</a></strong></span> 
        </font>script to drop the <span class="style2"><font face="Courier New, Courier, mono">p_before_jan_2006</font></span> 
        partition from the <span class="style2"><font face="Courier New, Courier, mono">ORDERS</font></span> 
        table. </p>
      <p class="bodycopy"><span class="bodycopy style2"><b><font face="Courier New, Courier, mono">@drop_partition</font></b></span></p>
      <p><img src="images/view_image.gif" name="drop_partition" border="1" class="imgborder_off" id="drop_partition" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
        <p>&nbsp;</p></td>
  </tr>
  <tr valign="top">
    <td class="bodycopy"><b> 9.</b></td>
    <td>
      <p class="bodycopy">Execute the <span class="style2"><strong><a href="files/query_dict_2.sql"><font face="Courier New, Courier, mono">query_dict_2.sql</font></a></strong></span><font face="Courier New, Courier, mono"> 
        </font>script to view information about the tables. </p>
      <p class="bodycopy"><span class="bodycopy style2"><b><font face="Courier New, Courier, mono">@query_dict_2</font></b></span></p>
      <p><img src="images/view_image.gif" name="query_dict_2" border="1" class="imgborder_off" id="query_dict_2" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
        <p>&nbsp;</p></td>
  </tr>
  <tr valign="top">
    <td class="bodycopy"><b> 10.</b></td>
    <td>
      <p class="bodycopy">Execute the <span class="style2"><strong><a href="files/add_partition.sql"><font face="Courier New, Courier, mono">add_partition.sql</font></a></strong></span><font face="Courier New, Courier, mono"> 
        </font>script to add a <span class="style2"><font face="Courier New, Courier, mono">p2007_01</font></span><font face="Courier New, Courier, mono"> 
        </font>partition. </p>
      <p class="bodycopy"><span class="bodycopy style2"><b>@add_partition</b></span></p>
      <p><img src="images/view_image.gif" name="add_partition" border="1" class="imgborder_off" id="add_partition" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
        <p>&nbsp;</p></td>
  </tr>
  <tr valign="top">
    <td class="bodycopy"><b> 11.</b></td>
    <td>
      <p class="bodycopy">Execute the<font face="Courier New, Courier, mono"> 
        <span class="style2"><strong><a href="files/cleanup_1.sql">cleanup_1.sql</a></strong></span> 
        </font>script to drop the partitions and tablespaces created in this scenario. 
      </p>
      <p class="bodycopy"><span class="bodycopy style2"><b><font face="Courier New, Courier, mono">@cleanup_1</font></b></span></p>
      <p><img src="images/view_image.gif" name="cleanup_1" border="1" class="imgborder_off" id="cleanup_1" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
        <p>&nbsp;</p></td>
  </tr>
</table>
<p align="right"><a href="#t" class="bodylink">Back to Topic List</a> </p>
<h3 class="navheader"><a name="t2" id="t2"></a><span class="navheader">Using Interval Partitioning</span></h3>
<p class="bodycopy"> Interval partitioning fully automates the creation of range 
  partitions. Managing the creation of new partitions can be a cumbersome and 
  highly repetitive task. This is especially true for predictable additions of 
  partitions covering small ranges, such as adding new daily partitions. Interval 
  partitioning automates this operation by creating partitions on demand.</p>
<p class="bodycopy">Perform the following steps to understand the use of interval partitioning:</p>
<table border="0" cellspacing="0" cellpadding="1" width="650" class="bodycopy">
  <tbody> 
  <tr valign="top"> 
    <td width="25" height="87"><b> 1.</b></td>
    <td> 
      <p>Execute the<font face="Courier New, Courier, mono"> <span class="style2"><strong><a href="files/create_newsales.sql">create_newsales.sql</a></strong></span> 
        </font>script to create the <span class="style4"><font face="Courier New, Courier, mono">NEWSALES</font></span> 
        interval-partitioned table.</p>
      <p><span class="bodycopy style2"><b><font face="Courier New, Courier, mono">@create_newsales</font></b></span></p>
      <p><img src="images/view_image.gif" name="create_newsales" border="1" class="imgborder_off" id="create_newsales" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
      <p>&nbsp;</p>
    </td>
  </tr>
  <tr valign="top"> 
    <td width="25" height="50"><b> 2.</b></td>
    <td> 
      <p>Execute the<font face="Courier New, Courier, mono"> <span class="style2"><strong><a href="files/query_dict_3.sql">query_dict_3.sql</a></strong></span> 
        </font>script to query the <font face="courier new,courier">USER_TAB_PARTITIONS<span class="style2">NEWSALES</span></font> 
        dictionary view for information about the <span class="style2"><font face="Courier New, Courier, mono">NEWSALES</font></span> 
        table.</p>
      <p><span class="bodycopy style2"><b><font face="Courier New, Courier, mono">@query_dict_3</font></b></span></p>
      <p><img src="images/view_image.gif" name="query_dict_3" border="1" class="imgborder_off" id="query_dict_3" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
      <p>&nbsp;</p>
    </td>
  </tr>
  <tr valign="top"> 
    <td width="25" height="50"><b> 3.</b></td>
    <td> 
      <p>Execute the<font face="Courier New, Courier, mono"> <span class="style2"><strong><a href="files/insert_newsales.sql">insert_newsales.sql</a></strong></span> 
        </font>script to insert new data into the <span class="style2"><font face="Courier New, Courier, mono">NEWSALES</font></span> 
        table that forces the creation of a new partition (segment).</p>
      <p><span class="bodycopy style2"><b><font face="Courier New, Courier, mono">@insert_newsales</font></b></span><font face="Courier New, Courier, mono"><br>
        <b></b></font></p>
      <p><img src="images/view_image.gif" name="insert_newsales" border="1" class="imgborder_off" id="insert_newsales" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
      <p>&nbsp;</p>
    </td>
  </tr>
  <tr valign="top"> 
    <td width="25" height="51"><b> 4.</b></td>
    <td> 
      <p> Execute the <span class="style2"><strong><a href="files/query_dict_4.sql"><font face="Courier New, Courier, mono">query_dict_4.sql</font></a></strong></span><font face="Courier New, Courier, mono"> 
        </font>script to see information about the new partition. </p>
      <p><span class="bodycopy style2"><b><font face="Courier New, Courier, mono">@query_dict_4</font></b></span></p>
      <p><img src="images/view_image.gif" name="query_dict_4" border="1" class="imgborder_off" id="query_dict_4" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
      <p>&nbsp;</p></td>
  </tr>
  <tr valign="top"> 
    <td width="25" height="51"><b>5.</b></td>
    <td> 
      <p>Execute the <span class="style2"><strong><a href="files/merge_partition.sql"><font face="Courier New, Courier, mono">merge_partition.sql</font></a></strong></span><font face="Courier New, Courier, mono"> 
        </font>script to merge two partitions. </p>
      <p><span class="bodycopy style2"><b><font face="Courier New, Courier, mono">@merge_partition</font></b></span></p>
      <p><img src="images/view_image.gif" name="merge_partition" border="1" class="imgborder_off" id="merge_partition" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
      <p>&nbsp;</p>
    </td>
  </tr>
  <tr valign="top"> 
    <td width="25" height="51"><b>6.</b></td>
    <td> 
      <p>Execute the <span class="style2"><strong><a href="files/query_dict_5.sql"><font face="Courier New, Courier, mono">query_dict_5.sql</font></a></strong></span><font face="Courier New, Courier, mono"> 
        </font>script to view information about the merged partitions. </p>
      <p><span class="bodycopy style2"><b><font face="Courier New, Courier, mono">@query_dict_5</font></b></span></p>
      <p><img src="images/view_image.gif" name="query_dict_5" border="1" class="imgborder_off" id="query_dict_5" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
      <p>&nbsp;</p>
    </td>
  </tr>
  <tr valign="top">
    <td height="51"><b>7.</b></td>
    <td>
      <p>Execute the <span class="style2"><strong><a href="files/create_hist_newsales.sql"><font face="Courier New, Courier, mono">create_hist_newsales.sql</font></a></strong></span> 
        script to create a range-partitioned table. </p>
      <p><span class="bodycopy style2"><b><font face="Courier New, Courier, mono">@create_hist_newsales</font></b></span></p>
      <p><img src="images/view_image.gif" name="create_hist_newsales" border="1" class="imgborder_off" id="create_hist_newsales" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
        <p>&nbsp;</p></td>
  </tr>
  <tr valign="top">
    <td height="51"><b>8.</b></td>
    <td>
      <p>Execute the <span class="style2"><strong><a href="files/query_dict_6.sql"><font face="Courier New, Courier, mono">query_dict_6.sql</font></a></strong></span><font face="Courier New, Courier, mono"> 
        </font>script to view information about the merged partitions. </p>
      <p><span class="bodycopy style2"><b><font face="Courier New, Courier, mono">@query_dict_6</font></b></span></p>
      <p><img src="images/view_image.gif" name="query_dict_6" border="1" class="imgborder_off" id="query_dict_6" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
        <p>&nbsp;</p></td>
  </tr>
  <tr valign="top">
    <td height="51"><b>9.</b></td>
    <td>
      <p>Execute the<font face="Courier New, Courier, mono"> <span class="style2"><strong><a href="files/insert_histnewsales_row_1.sql">insert_histnewsales_row_1.sql</a></strong></span> 
        </font>script to insert a row into the <font face="courier new,courier">HISTORICAL_NEWSALES 
        </font>table. The insert fails because the partitioned table is not currently 
        an interval-partitioned table. </p>
      <p><span class="bodycopy style2"><b><font face="Courier New, Courier, mono">@insert_histnewsales_row_1</font></b></span></p>
      <p><img src="images/view_image.gif" name="insert_histnewsales_row_1" border="1" class="imgborder_off" id="insert_histnewsales_row_1" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
        <p>&nbsp;</p></td>
  </tr>
  <tr valign="top">
    <td height="51"><b>10.</b></td>
    <td>
      <p>Execute the <span class="style2"><strong><a href="files/alter_hist_newsales.sql"><font face="Courier New, Courier, mono">alter_hist_newsales.sql</font></a></strong></span><font face="Courier New, Courier, mono"> 
        </font>script to change the partitioned table to an interval-partitioned 
        table. </p>
      <p><span class="bodycopy style2"><b><font face="Courier New, Courier, mono">@alter_hist_newsales</font></b></span></p>
      <p><img src="images/view_image.gif" name="alter_hist_newsales" border="1" class="imgborder_off" id="alter_hist_newsales" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
        <p>&nbsp;</p></td>
  </tr>
  <tr valign="top">
    <td height="51"><b>11.</b></td>
    <td>
      <p>Execute the<font face="Courier New, Courier, mono"> <span class="style2"><strong><a href="files/insert_histnewsales_row_2.sql">insert_histnewsales_row_2.sql</a></strong></span> 
        </font>script to try to insert a row into the table again. </p>
      <p><span class="bodycopy style2"><b><font face="Courier New, Courier, mono">@insert_histnewsales_row_2</font></b></span></p>
      <p><img src="images/view_image.gif" name="insert_histnewsales_row_2" border="1" class="imgborder_off" id="insert_histnewsales_row_2" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
        <p>&nbsp;</p></td>
  </tr>
  <tr valign="top">
    <td height="51"><b>12.</b></td>
    <td>
      <p>Execute the <span class="style2"><strong><a href="files/query_dict_7.sql"><font face="Courier New, Courier, mono">query_dict_7.sql</font></a></strong></span><font face="Courier New, Courier, mono"> 
        </font>script to view information about the partitions. </p>
      <p><span class="bodycopy style2"><b><font face="Courier New, Courier, mono">@query_dict_7</font></b></span></p>
      <p><img src="images/view_image.gif" name="query_dict_7" border="1" class="imgborder_off" id="query_dict_7" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
        <p>&nbsp;</p></td>
  </tr>  
  </tbody> 
</table>
<p align="right"><a href="#t" class="bodylink">Back to Topic List </a></p>
<a name="t3" id="t3"></a><span class="navheader">Using Extended Composite Partitioning 
</span> 
<p class="bodycopy">Composite range-range partitioning enables logical range partitioning 
  along two dimensions; &#151;for example, partition by <span class="style2"><font face="Courier New, Courier, mono">ORDER_DATE</font></span> 
  and range subpartition by <span class="style2"><font face="Courier New, Courier, mono">SHIPPING_DATE</font></span>. 
  Composite range-range partitioning provides an additional modeling strategy 
  to map a business need to the partitioning of an object.</p>
<p class="bodycopy">In this example, the service-level agreement with the customer 
  states that an order will be delivered in the calendar month after the order 
  was placed. The following types of orders are identified:</p>
<table width="613" border="1" cellpadding="1" cellspacing="0">
  <tbody>
    <tr valign="top">
      <td width="62" class="bodycopy"><strong>EARLY</strong></td>
      <td width="541" class="bodylink"><span class="bodycopy">Orders that are delivered before the the middle of the next month after the order was placed. These orders likely exceed customers' expectations.</span></td>
    </tr>
    <tr valign="top">
      <td class="bodycopy"><strong>AGREED</strong></td>
      
    <td class="bodylink"><span class="bodycopy">Orders that are delivered in the 
      calendar month after the order was placed (but not early orders)</span></td>
    </tr>
    <tr valign="top">
      <td class="bodycopy"><strong>LATE</strong></td>
      
    <td class="bodylink"><span class="bodycopy">Orders that were only delivered 
      starting the second calendar month after the order was placed</span></td>
    </tr>
  </tbody>
</table>
<p class="bodycopy">Perform the following steps to create a range-range composite partitioned table to satisfy the business needs:</p>
<table border="0" cellspacing="0" cellpadding="1" width="650" class="bodycopy">
  <tr valign="top">
    <td height="87"><b> 1.</b></td>
    <td height="87">
      <p>Execute the<font face="Courier New, Courier, mono"> <span class="style2"><strong><a href="files/create_shipments.sql">create_shipments.sql</a> 
        </strong></span></font>script to create the <span class="style2"><font face="Courier New, Courier, mono">SHIPMENTS</font></span> 
        table as a range-range composite partitioned table by <span class="style2"><font face="Courier New, Courier, mono">ORDER_DATE</font></span><font face="Courier New, Courier, mono"> 
        </font>and <span class="style2"><font face="Courier New, Courier, mono">SHIPDATE</font></span>. 
      </p>
      <p><span class="bodycopy style2"><b><font face="Courier New, Courier, mono">@create_shipments</font></b></span></p>
      <p><img src="images/view_image.gif" name="create_shipments" border="1" class="imgborder_off" id="create_shipments" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
        <p>&nbsp;</p></td>
  </tr>
  <tbody> 
  <tr valign="top"> 
    <td width="25" height="87"><b> 2.</b></td>
    <td width="600" height="87"> 
      <p>Use the <span class="style2"><strong><a href="files/insert_shipments.sql"><font face="Courier New, Courier, mono">insert_shipments.sql</font></a> 
        </strong></span>script to insert rows into the <span class="style2"><font face="Courier New, Courier, mono">SHIPMENTS</font></span> 
        table. </p>
      <p><span class="bodycopy style2"><b><font face="Courier New, Courier, mono">@insert_shipments</font></b></span></p>
      <p><img src="images/view_image.gif" name="insert_shipments" border="1" class="imgborder_off" id="insert_shipments" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
      <p>&nbsp;</p>
    </td>
  </tr>
  <tr valign="top">
    <td height="87"><b> 3.</b></td>
    <td height="87">
      <p>Execute the<font face="Courier New, Courier, mono"> <span class="style2"><strong><a href="files/count_shipments.sql">count_shipments.sql</a></strong></span> 
        </font>script to view how data was distributed in the <span class="style2"><font face="Courier New, Courier, mono">SHIPMENTS</font></span> 
        table.</p>
      <p><span class="bodycopy style2"><b><font face="Courier New, Courier, mono">@count_shipments</font></b></span></p>
      <p><img src="images/view_image.gif" name="count_shipments" border="1" class="imgborder_off" id="count_shipments" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
        <p>&nbsp;</p></td>
  </tr>
  </tbody>
</table>
<p align="right"><a href="#t" class="bodylink">Back to Topic List </a></p>
<a name="t4" id="t4"></a><span class="navheader">Using Virtual Column-Based Partitioning</span>
<p class="bodycopy">You can use virtual column partitioning to partition key columns defined on virtual columns of a table. 


Virtual columns are defined by evaluating an expression. 

Virtual columns can be defined at table creation or during modification time. Frequently, business requirements to logically partition objects do not match existing columns in a one-to-one manner. Oracle partitioning has been enhanced to allow a partitioning strategy being defined on virtual columns, thus enabling a more comprehensive match of the business requirements.</p>
<p class="bodycopy">In this example, employees categories are:</p>
<table width="362" border="1" cellpadding="1" cellspacing="0">
  <tbody>
    <tr valign="top">
      <td width="62" class="bodycopy"><strong>Poor</strong></td>
      <td width="290" class="bodylink"><span class="bodycopy">total salary (salary + commission) is less than 1000</span></td>
    </tr>
    <tr valign="top">
      <td class="bodycopy"><strong>Not doing too bad</strong></td>
      <td class="bodylink"><span class="bodycopy">salary is between 1000 and 3000</span></td>
    </tr>
    <tr valign="top">
      <td class="bodycopy"><strong>On target</strong></td>
      <td class="bodylink"><span class="bodycopy">salary of 3000</span></td>
    </tr>
    <tr valign="top">
      <td class="bodycopy"><strong>Filthy rich</strong></td>
      <td class="bodylink"><span class="bodycopy">salary &gt; 3000</span></td>
    </tr>
  </tbody>
</table>
<p class="bodycopy">Perform the following steps to understand the use of virtual column-based partitioning:</p>
<table border="0" cellspacing="0" cellpadding="1" width="650" class="bodycopy">
  <tbody> 
  <tr valign="top"> 
    <td width="26" height="87"><b> 1.</b></td>
    <td width="600" height="87"> 
      <p>Execute the<font face="Courier New, Courier, mono"> <span class="style2"><strong><a href="files/create_employees.sql">create_employees.sql</a></strong></span> 
        </font>script to create the <span class="style2"><font face="Courier New, Courier, mono">EMPLOYEES</font></span> 
        table with a virtual column. </p>
      <p><span class="bodycopy style2"><b><font face="Courier New, Courier, mono">@create_employees</font></b></span></p>
      <p><img src="images/view_image.gif" name="create_emp" border="1" class="imgborder_off" id="create_emp" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
      <p>&nbsp;</p>
    </td>
  </tr>
  <tr valign="top"> 
    <td width="26"><b> 2.</b></td>
    <td width="600" height="50"> 
      <p>Execute the <span class="style4"><a href="files/insert_emp.sql"><font face="Courier New, Courier, mono"><b>insert_employees.sql</b></font></a> 
        </span>script to <span class="style2"><font face="Courier New, Courier, mono">INSERT</font></span> 
        rows into the <span class="style2"><font face="Courier New, Courier, mono">EMPLOYEES</font></span> 
        table. </p>
      <p><span class="bodycopy style2"><b><font face="Courier New, Courier, mono">@insert_employees</font></b></span></p>
      <p><img src="images/view_image.gif" name="insert_emp" border="1" class="imgborder_off" id="insert_emp" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
      <p>&nbsp;</p>
    </td>
  </tr>
  <tr valign="top"> 
    <td width="26"><b> 3.</b></td>
    <td width="600" height="50"> 
      <p>Execute the<font face="Courier New, Courier, mono"> <span class="style2"><strong><a href="files/select_employees.sql">select_employees.sql</a></strong></span> 
        </font>script to query the <span class="style2"><font face="Courier New, Courier, mono">EMPLOYEES</font></span> 
        table. </p>
      <p><span class="bodycopy style2"><b><font face="Courier New, Courier, mono">@select_employees</font></b></span></p>
      <p><img src="images/view_image.gif" name="select_emp" border="1" class="imgborder_off" id="select_emp" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
      <p>&nbsp;</p>
    </td>
  </tr>
  <tr valign="top">
    <td><b> 4.</b></td>
    <td height="50">
      <p>Execute the<font face="Courier New, Courier, mono"> <span class="style2"><strong><a href="files/create_prod_return.sql">create_prod_return.sql</a></strong></span></font> 
        script to create the <span class="style2"><font face="Courier New, Courier, mono">PRODUCT_RETURNS</font></span> 
        table with a virtual column, which is used to partition the table. </p>
      <p><span class="bodycopy style2"><b><font face="Courier New, Courier, mono">@create_prod_return</font></b></span></p>
      <p><img src="images/view_image.gif" name="create_prod_return" border="1" class="imgborder_off" id="create_prod_return" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
        <p>&nbsp;</p></td>
  </tr>
  <tr valign="top">
    <td><b> 5.</b></td>
    <td height="50">
      <p>Execute the<font face="Courier New, Courier, mono"> <span class="style2"><strong><a href="files/insert_prod_ret.sql">insert_prod_ret.sql</a></strong></span></font> 
        script to insert rows into the <span class="style2"><font face="Courier New, Courier, mono">PRODUCT_RETURNS</font></span> 
        table. </p>
      <p><span class="bodycopy style2"><b><font face="Courier New, Courier, mono">@insert_prod_ret</font></b></span></p>
      <p><img src="images/view_image.gif" name="insert_prod_ret" border="1" class="imgborder_off" id="insert_prod_ret" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
        <p>&nbsp;</p></td>
  </tr>
  <tr valign="top">
    <td><b> 6.</b></td>
    <td height="50">
      <p>Execute the<font face="Courier New, Courier, mono"> <span class="style2"><strong><a href="files/select_prod_return.sql">select_prod_return.sql</a></strong></span> 
        </font>script to query the <span class="style2"><font face="Courier New, Courier, mono">PRODUCT_RETURNS</font></span> 
        table. </p>
      <p><span class="bodycopy style2"><b><font face="Courier New, Courier, mono">@select_prod_return</font></b></span></p>
      <p><img src="images/view_image.gif" name="select_prod_ret" border="1" class="imgborder_off" id="select_prod_ret" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
        <p>&nbsp;</p></td>
  </tr>
  <tr valign="top">
    <td><b> 7.</b></td>
    <td height="50">
      <p>Execute the<font face="Courier New, Courier, mono"> <span class="style2"><strong><a href="files/xplan_prod_ret.sql">xplan_prod_ret.sql</a></strong></span> 
        </font>script to show partition pruning for queries that use the expression 
        that defines the virtual column. </p>
      <p><span class="bodycopy style2"><b><font face="Courier New, Courier, mono">@xplan_prod_ret</font></b></span></p>
      <p><img src="images/view_image.gif" name="xplan_prod_ret" border="1" class="imgborder_off" id="xplan_prod_ret" onClick="hideImage(this)" onMouseOver="showImage(this)"></p>
        <p>&nbsp;</p></td>
  </tr>
  </tbody> 
</table>
<p align="right"><a href="#t" class="bodylink">Back to Topic List </a></p>
<h4>
  <p class="navheader"><a name="s"></a>Summary</p>
</H4>
<p><span class=bodycopy>In this tutorial, you learned how to:</span></p>
<table border="0" cellpadding="1" cellspacing="0">
  <tr valign="top">
    <td width="15" class="bodycopy"><img src="images/bullet.gif" alt="bullet" width="16" height="16"></td>
    <td colspan="2" class="bodycopy">Use reference partitioning </td>
  </tr>
  <tr valign="top">
    <td width="15" class="bodycopy"><img src="images/bullet.gif" alt="bullet" width="16" height="16"></td>
    <td colspan="2" class="bodycopy">Use interval partitioning  </td>
  </tr>
  <tr valign="top">
    <td class="bodycopy"><img src="images/bullet.gif" alt="bullet" width="16" height="16"></td>
    <td colspan="2" class="bodycopy">Use extended composite partitioning </td>
  </tr>
  <tr valign="top">
    <td class="bodycopy"><img src="images/bullet.gif" alt="bullet" width="16" height="16"></td>
    <td colspan="2" class="bodycopy">Use virtual column partitioning </td>
  </tr>
  <tbody>
  </tbody>
</table>
<p align="right"><a href="#t" class="bodylink">Back to Topic List</a></p>
<h3 class="bodycopy"><img src="images/view_image.gif" width="24" height="24" align="absmiddle" onMouseOver="hideAllImages()">  <b><font color="#ff0000">Place the cursor over this icon to hide all screenshots.</font></b>
</h3>
<h4 align="left">
  <p align="left"> 
  </p>
</h4>
<div align="right"></div>
<h4 align="left">
  <p align="left"> 
  </p>
</h4>
<div align="right"></div>
<h4>
  <p></p>
  <h3>&nbsp;</h3>
  <h4>&nbsp;</h4>
  <h4>&nbsp;</h4>
</h4>
</body>
<script language="JavaScript" type="text/JavaScript">
<!--
preLoadImages();
//-->
</script>


<script language="JavaScript" type="text/JavaScript">
<!--
preLoadImages();
//-->
</script>
</html>